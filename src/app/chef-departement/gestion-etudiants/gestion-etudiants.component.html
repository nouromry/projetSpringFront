<div class="container">
  <div class="search-container">
    <div class="filter-dropdown">
      <button class="filter-btn">
        <i class="fa fa-filter"></i> Filtrer par binôme
      </button>
    </div>
    <div class="search-box">
      <input type="text" [(ngModel)]="searchTerm" (input)="search()" placeholder="Rechercher..." class="search-input">
    </div>
    <button class="btn btn-primary" (click)="toggleProjectAssignments()">
      {{ showProjectAssignments ? 'Masquer affectations' : 'Afficher affectations projets' }}
    </button>
  </div>

  <div class="table-container">
    <table class="students-table">
      <thead>
        <tr>
          <th>Binôme 1</th>
          <th>Binôme 2</th>
          <th>Classe</th>
          <th>Groupe</th>
          <th>Moyenne Élève</th>
          <th>Moyenne Élève</th>
          <th>Choix de PFA</th>
          <th>Moyenne Binôme</th>
          <th *ngIf="showProjectAssignments">Projet Affecté</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let binome of filteredBinomes">
          <td>{{ binome.prenomEtud1 }} {{ binome.nomEtud1 }}</td>
          <td>{{ binome.prenomEtud2 }} {{ binome.nomEtud2 }}</td>
          <td>{{ binome.filiere }}</td>
          <td>{{ binome.groupe }}</td>
          <td>{{ binome.moyenneEtud1 }}</td>
          <td>{{ binome.moyenneEtud2 }}</td>
          <td class="choix-pfa">{{ getProjetChoices(binome) }}</td>
          <td>{{ binome.moyenneBinome }}</td>
          <td *ngIf="showProjectAssignments">{{ getAssignedProject(binome) }}</td>
        </tr>
      </tbody>
    </table>
    <div *ngIf="isLoading" class="loading-spinner">
      Chargement des affectations de projets...
    </div>
  </div>
</div>