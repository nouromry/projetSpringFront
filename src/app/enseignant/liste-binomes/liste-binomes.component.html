<div class="container">
  <!-- Filter and search section -->
  <div class="filter-search-container">
    <div class="filter-dropdown">
      <span>Trier:</span>
      <div class="dropdown">
        <select [(ngModel)]="selectedFiliere" (change)="onFiliereChange(selectedFiliere)">
          <option value="">par fili√®re</option>
          <option *ngFor="let filiere of filieres" [value]="filiere">{{ filiere }}</option>
        </select>
      </div>
    </div>
    
    <div class="search-input">
      <input 
        type="search" 
        [(ngModel)]="searchTerm" 
        (input)="onSearchChange()"
        placeholder="rechercher par projet..."
      />
      <span class="search-icon">üîç</span>
    </div>
  </div>

  <!-- Loading spinner -->
  <div class="loading-spinner" *ngIf="isLoading">
    <div class="spinner"></div>
    <p>Chargement des projets...</p>
  </div>

  <!-- Error message -->
  <div class="error-alert" *ngIf="errorMessage">
    <p>{{ errorMessage }}</p>
  </div>

  <!-- Table of binomes -->
  <div class="table-container" *ngIf="!isLoading && !errorMessage">
    <table class="binomes-table">
      <thead>
        <tr>
          <th class="binome-column">Binome</th>
          <th class="projet-column">projet</th>
          <th class="etudiant-column">Etudiant</th>
          <th class="groupe-column">Groupe</th>
          <th class="filiere-column">Filiere</th>
        </tr>
      </thead>
      <tbody>
        <ng-container *ngFor="let projet of filteredProjets">
          <ng-container *ngIf="projet.binomeAffecte">
            <tr>
              <td class="binome-number" [attr.rowspan]="2">{{ projet.id }}</td>
              <td class="projet-text" [attr.rowspan]="2">{{ projet.titre}}</td>
              <td class="etudiant-name">{{ projet.binomeAffecte.etud1.nom }} {{ projet.binomeAffecte.etud1.prenom }}</td>
              <td class="groupe-letter">{{ projet.binomeAffecte.etud1.groupe }}</td>
              <td class="filiere-name">{{ projet.filiere }}</td>
            </tr>
            <tr>
              <td class="etudiant-name">{{ projet.binomeAffecte.etud2.nom }} {{ projet.binomeAffecte.etud2.prenom }}</td>
              <td class="groupe-letter">{{ projet.binomeAffecte.etud2.groupe }}</td>
              <td class="filiere-name">{{ projet.filiere }}</td>
            </tr>
          </ng-container>
        </ng-container>
        
        <!-- No results message -->
        <tr *ngIf="filteredProjets.length === 0">
          <td colspan="5" class="no-results">
            Aucun projet trouv√© avec les crit√®res s√©lectionn√©s
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>